<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntensifyHQ - Work Like You Train</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#6366f1">
</head>
<body>
    <div class="landing-page">
        <!-- Hero Section -->
        <header class="hero">
            <nav class="nav">
                <div class="nav-brand">
                    <span class="logo">üí™</span>
                    <h1>IntensifyHQ</h1>
                </div>
                <button class="btn btn-primary" onclick="showAuthModal()">Get Started</button>
            </nav>
            
            <div class="hero-content">
                <h2 class="hero-title">Work Like You Train</h2>
                <p class="hero-subtitle">Transform your productivity with the power of gym principles. Track intensity, burn, and ROI for every task.</p>
                
                <div class="hero-features">
                    <div class="feature-badge">
                        <span class="emoji">üê∏</span>
                        <span>Eat the Frog</span>
                    </div>
                    <div class="feature-badge">
                        <span class="emoji">üìà</span>
                        <span>80/20 Focus</span>
                    </div>
                    <div class="feature-badge">
                        <span class="emoji">üèÜ</span>
                        <span>PR Tracking</span>
                    </div>
                </div>
                
                <div class="cta-buttons">
                    <button class="btn btn-hero" onclick="showAuthModal('register')">Start Free Trial</button>
                    <button class="btn btn-secondary" onclick="showDemo()">See Demo</button>
                </div>
                
                <p class="pricing-info">$0.99/month after trial ‚Ä¢ Cancel anytime</p>
            </div>
        </header>

        <!-- Features Section -->
        <section class="features-section">
            <h3 class="section-title">The Training System for Work</h3>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h4>Intensity Scoring</h4>
                    <p>Rate every task 1-10 like gym reps. Build your work capacity over time.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üî•</div>
                    <h4>Burn Tracking</h4>
                    <p>Monitor energy expenditure. Know when to push and when to recover.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üíé</div>
                    <h4>ROI Analysis</h4>
                    <p>Focus on high-value work. Delegate or eliminate the rest.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üê∏</div>
                    <h4>Frog First</h4>
                    <p>Tackle your hardest task when energy is highest. Build the habit.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üèÜ</div>
                    <h4>PR Celebrations</h4>
                    <p>Break personal records. Get instant recognition for breakthrough work.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h4>Deep Insights</h4>
                    <p>Discover peak hours, energy vampires, and optimization opportunities.</p>
                </div>
            </div>
        </section>

        <!-- Philosophy Section -->
        <section class="philosophy-section">
            <h3 class="section-title">Three Proven Philosophies, One System</h3>
            
            <div class="philosophy-cards">
                <div class="philosophy-card">
                    <h4>Work Burn Training Plan</h4>
                    <p>Treat work like athletic training. Progressive overload for your career.</p>
                </div>
                
                <div class="philosophy-card">
                    <h4>4-Hour Work Week</h4>
                    <p>80/20 principle in action. Maximum results, minimum waste.</p>
                </div>
                
                <div class="philosophy-card">
                    <h4>Eat That Frog</h4>
                    <p>Hardest task first. Win the day before it begins.</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeAuthModal()">&times;</button>
            
            <div class="auth-container">
                <div class="auth-header">
                    <span class="logo-large">üí™</span>
                    <h2 id="authTitle">Welcome to IntensifyHQ</h2>
                </div>
                
                <!-- Login Form -->
                <form id="loginForm" class="auth-form">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required placeholder="you@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-full">Sign In</button>
                    
                    <p class="auth-switch">
                        Don't have an account? 
                        <a href="#" onclick="switchToRegister(event)">Sign up</a>
                    </p>
                </form>
                
                <!-- Register Form -->
                <form id="registerForm" class="auth-form" style="display: none;">
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required placeholder="you@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required placeholder="Min 8 characters">
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-full">Create Account</button>
                    
                    <p class="auth-switch">
                        Already have an account? 
                        <a href="#" onclick="switchToLogin(event)">Sign in</a>
                    </p>
                </form>
                
                <div id="authError" class="error-message"></div>
                <div id="authSuccess" class="success-message"></div>
            </div>
        </div>
    </div>

    <!-- Demo Modal -->
    <div id="demoModal" class="modal">
        <div class="modal-content modal-large">
            <button class="modal-close" onclick="closeDemoModal()">&times;</button>
            
            <div class="demo-container">
                <h3>See IntensifyHQ in Action</h3>
                
                <div class="demo-stats">
                    <div class="stat-card">
                        <div class="stat-value">147</div>
                        <div class="stat-label">Tasks Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">8.2</div>
                        <div class="stat-label">Avg Intensity</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">21</div>
                        <div class="stat-label">Day Streak üî•</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">12</div>
                        <div class="stat-label">PRs This Month</div>
                    </div>
                </div>
                
                <div class="demo-chart">
                    <h4>Your Intensity Trend</h4>
                    <canvas id="demoChart"></canvas>
                </div>
                
                <button class="btn btn-primary btn-full" onclick="showAuthModal('register')">
                    Start Your Journey
                </button>
            </div>
        </div>
    </div>

    <script src="/app.js"></script>
    <script>
        // Auth Modal Functions
        function showAuthModal(mode = 'login') {
            document.getElementById('authModal').classList.add('active');
            if (mode === 'register') {
                switchToRegister();
            }
        }
        
        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
        }
        
        function switchToRegister(e) {
            if (e) e.preventDefault();
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('authTitle').textContent = 'Create Your Account';
        }
        
        function switchToLogin(e) {
            if (e) e.preventDefault();
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('authTitle').textContent = 'Welcome Back';
        }
        
        // Demo Modal
        function showDemo() {
            document.getElementById('demoModal').classList.add('active');
            drawDemoChart();
        }
        
        function closeDemoModal() {
            document.getElementById('demoModal').classList.remove('active');
        }
        
        function drawDemoChart() {
            const canvas = document.getElementById('demoChart');
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 200;
            
            // Simple line chart
            const data = [5, 6, 5.5, 7, 6.8, 7.5, 8, 7.8, 8.2, 8.5, 8.3, 8.7];
            const maxVal = Math.max(...data);
            const points = data.map((val, i) => ({
                x: (i / (data.length - 1)) * (canvas.width - 40) + 20,
                y: canvas.height - 20 - ((val / maxVal) * (canvas.height - 40))
            }));
            
            // Draw grid
            ctx.strokeStyle = '#e5e7eb';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 4; i++) {
                const y = 20 + (i * (canvas.height - 40) / 4);
                ctx.beginPath();
                ctx.moveTo(20, y);
                ctx.lineTo(canvas.width - 20, y);
                ctx.stroke();
            }
            
            // Draw line
            ctx.strokeStyle = '#6366f1';
            ctx.lineWidth = 3;
            ctx.beginPath();
            points.forEach((point, i) => {
                if (i === 0) ctx.moveTo(point.x, point.y);
                else ctx.lineTo(point.x, point.y);
            });
            ctx.stroke();
            
            // Draw points
            ctx.fillStyle = '#6366f1';
            points.forEach(point => {
                ctx.beginPath();
                ctx.arc(point.x, point.y, 4, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Draw target line
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            const targetY = canvas.height - 20 - ((8 / maxVal) * (canvas.height - 40));
            ctx.beginPath();
            ctx.moveTo(20, targetY);
            ctx.lineTo(canvas.width - 20, targetY);
            ctx.stroke();
        }
        
        // Form Handlers
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    localStorage.setItem('token', data.token);
                    if (data.subscriptionActive) {
                        window.location.href = '/dashboard';
                    } else {
                        // Redirect to Stripe checkout
                        const checkoutResponse = await fetch('/api/checkout', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${data.token}`
                            }
                        });
                        const checkoutData = await checkoutResponse.json();
                        window.location.href = checkoutData.url;
                    }
                } else {
                    document.getElementById('authError').textContent = data.error;
                    document.getElementById('authError').style.display = 'block';
                }
            } catch (error) {
                document.getElementById('authError').textContent = 'Network error. Please try again.';
                document.getElementById('authError').style.display = 'block';
            }
        });
        
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (password !== confirmPassword) {
                document.getElementById('authError').textContent = 'Passwords do not match';
                document.getElementById('authError').style.display = 'block';
                return;
            }
            
            if (password.length < 8) {
                document.getElementById('authError').textContent = 'Password must be at least 8 characters';
                document.getElementById('authError').style.display = 'block';
                return;
            }
            
            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    localStorage.setItem('token', data.token);
                    document.getElementById('authSuccess').textContent = 'Account created! Redirecting to payment...';
                    document.getElementById('authSuccess').style.display = 'block';
                    
                    // Redirect to Stripe checkout
                    const checkoutResponse = await fetch('/api/checkout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${data.token}`
                        }
                    });
                    const checkoutData = await checkoutResponse.json();
                    window.location.href = checkoutData.url;
                } else {
                    document.getElementById('authError').textContent = data.error;
                    document.getElementById('authError').style.display = 'block';
                }
            } catch (error) {
                document.getElementById('authError').textContent = 'Network error. Please try again.';
                document.getElementById('authError').style.display = 'block';
            }
        });
    </script>
</body>
</html>
