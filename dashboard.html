<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntensifyHQ Dashboard</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#6366f1">
</head>
<body class="dashboard-body">
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <span class="logo">üí™</span>
                <h2>IntensifyHQ</h2>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-page="tasks">
                    <span class="nav-icon">‚úÖ</span>
                    <span>Tasks</span>
                </a>
                <a href="#" class="nav-item" data-page="insights">
                    <span class="nav-icon">üí°</span>
                    <span>Insights</span>
                </a>
                <a href="#" class="nav-item" data-page="planner">
                    <span class="nav-icon">üìÖ</span>
                    <span>Week Planner</span>
                </a>
                <a href="#" class="nav-item" data-page="scoring">
                    <span class="nav-icon">üìè</span>
                    <span>Scoring Guide</span>
                </a>
                <a href="#" class="nav-item" data-page="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </a>
                <a href="/guide.html" class="nav-item" target="_blank">
                    <span class="nav-icon">üìñ</span>
                    <span>Guide</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <span id="userEmail">user@example.com</span>
                    <button class="btn-text" onclick="logout()">Logout</button>
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Quick Add Bar -->
            <div class="quick-add-bar">
                <h3>Quick Log Task</h3>
                <form id="quickAddForm" class="quick-add-form">
                    <input type="text" id="taskName" placeholder="Task name..." required>
                    
                    <div class="quick-metrics">
                        <div class="metric-input">
                            <label>Intensity</label>
                            <input type="number" id="intensity" min="1" max="10" required placeholder="1-10">
                        </div>
                        <div class="metric-input">
                            <label>ROI</label>
                            <input type="number" id="roi" min="1" max="10" required placeholder="1-10">
                        </div>
                        <div class="metric-input">
                            <label>Burn</label>
                            <input type="number" id="burn" min="1" max="10" required placeholder="1-10">
                        </div>
                        <div class="metric-input">
                            <label>Minutes</label>
                            <input type="number" id="minutes" min="1" value="25" required>
                        </div>
                    </div>
                    
                    <div class="quick-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="isFrog">
                            <span>üê∏ Frog Task</span>
                        </label>
                        
                        <select id="action">
                            <option value="Keep">Keep</option>
                            <option value="Delegate">Delegate</option>
                            <option value="Automate">Automate</option>
                            <option value="Eliminate">Eliminate</option>
                        </select>
                        
                        <button type="submit" class="btn btn-primary">
                            <span>‚ûï Log Task</span>
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Dashboard Page -->
            <div id="dashboardPage" class="page active">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-content">
                            <div class="stat-value" id="statIntensity">-</div>
                            <div class="stat-label">Avg Intensity</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <div class="stat-value" id="statROI">-</div>
                            <div class="stat-label">Avg ROI</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-content">
                            <div class="stat-value" id="statBurn">-</div>
                            <div class="stat-label">Avg Burn</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="statFocus">-</div>
                            <div class="stat-label">Focus Score</div>
                        </div>
                    </div>
                    
                    <div class="stat-card highlight">
                        <div class="stat-icon">üê∏</div>
                        <div class="stat-content">
                            <div class="stat-value" id="statFrogs">-</div>
                            <div class="stat-label">Frogs Eaten</div>
                        </div>
                    </div>
                    
                    <div class="stat-card highlight">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="statPRs">-</div>
                            <div class="stat-label">PRs Set</div>
                        </div>
                    </div>
                    
                    <div class="stat-card accent">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-content">
                            <div class="stat-value" id="statStreak">-</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-content">
                            <div class="stat-value" id="statTime">-</div>
                            <div class="stat-label">Time Today</div>
                        </div>
                    </div>
                </div>
                
                <!-- Charts Section -->
                <div class="charts-grid">
                    <div class="chart-card">
                        <h4>Intensity Trend (4 Weeks)</h4>
                        <canvas id="trendChart"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <h4>Intensity vs ROI</h4>
                        <canvas id="scatterChart"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <h4>Action Breakdown</h4>
                        <canvas id="pieChart"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <h4>Frog Timing</h4>
                        <canvas id="frogChart"></canvas>
                    </div>
                </div>
                
                <!-- Recent Tasks -->
                <div class="recent-tasks">
                    <h3>Recent Tasks</h3>
                    <div id="recentTasksList" class="tasks-list">
                        <!-- Tasks will be loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- Tasks Page -->
            <div id="tasksPage" class="page">
                <h2>Task Log</h2>
                
                <div class="filters">
                    <input type="date" id="filterDate" placeholder="Filter by date">
                    <select id="filterType">
                        <option value="">All Tasks</option>
                        <option value="frog">Frogs Only</option>
                        <option value="pr">PRs Only</option>
                        <option value="high">High Intensity (8+)</option>
                        <option value="highROI">High ROI (8+)</option>
                    </select>
                    <button class="btn btn-secondary" onclick="loadTasks()">Filter</button>
                </div>
                
                <div id="tasksList" class="tasks-table">
                    <!-- Tasks table will be loaded here -->
                </div>
            </div>
            
            <!-- Insights Page -->
            <div id="insightsPage" class="page">
                <h2>Insights & Analytics</h2>
                
                <div class="insights-grid">
                    <!-- Peak Hours -->
                    <div class="insight-card">
                        <h3>üåÖ Peak Performance Hours</h3>
                        <div id="peakHours" class="insight-content">
                            <!-- Peak hours will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Energy Vampires -->
                    <div class="insight-card">
                        <h3>üßõ Energy Vampires</h3>
                        <div id="energyVampires" class="insight-content">
                            <!-- Energy vampires will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Holy Trinity -->
                    <div class="insight-card">
                        <h3>‚ú® Holy Trinity Tasks</h3>
                        <div id="holyTrinity" class="insight-content">
                            <!-- Holy trinity tasks will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Burnout Risk -->
                    <div class="insight-card">
                        <h3>‚ö†Ô∏è Recovery Status</h3>
                        <div id="burnoutRisk" class="insight-content">
                            <!-- Burnout analysis will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <!-- Weekly Summary -->
                <div class="weekly-summary">
                    <h3>Weekly Summary</h3>
                    <div id="weeklySummary" class="summary-content">
                        <!-- Weekly summary will be loaded here -->
                    </div>
                </div>
                
                <!-- Daily Tips -->
                <div class="daily-tips">
                    <h3>üí° Optimization Tips</h3>
                    <div id="dailyTips" class="tips-content">
                        <!-- Tips will be loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- Week Planner Page -->
            <div id="plannerPage" class="page">
                <h2>Week Planner</h2>
                
                <div class="planner-grid">
                    <div class="day-plan" data-day="1">
                        <h4>Monday</h4>
                        <input type="text" placeholder="Planned frog..." class="frog-input">
                        <input type="number" placeholder="Target intensity" min="1" max="10" class="intensity-input">
                        <div class="day-status">
                            <span class="status-icon">‚è≥</span>
                            <span class="status-text">Not started</span>
                        </div>
                    </div>
                    
                    <div class="day-plan" data-day="2">
                        <h4>Tuesday</h4>
                        <input type="text" placeholder="Planned frog..." class="frog-input">
                        <input type="number" placeholder="Target intensity" min="1" max="10" class="intensity-input">
                        <div class="day-status">
                            <span class="status-icon">‚è≥</span>
                            <span class="status-text">Not started</span>
                        </div>
                    </div>
                    
                    <div class="day-plan" data-day="3">
                        <h4>Wednesday</h4>
                        <input type="text" placeholder="Planned frog..." class="frog-input">
                        <input type="number" placeholder="Target intensity" min="1" max="10" class="intensity-input">
                        <div class="day-status">
                            <span class="status-icon">‚è≥</span>
                            <span class="status-text">Not started</span>
                        </div>
                    </div>
                    
                    <div class="day-plan" data-day="4">
                        <h4>Thursday</h4>
                        <input type="text" placeholder="Planned frog..." class="frog-input">
                        <input type="number" placeholder="Target intensity" min="1" max="10" class="intensity-input">
                        <div class="day-status">
                            <span class="status-icon">‚è≥</span>
                            <span class="status-text">Not started</span>
                        </div>
                    </div>
                    
                    <div class="day-plan" data-day="5">
                        <h4>Friday</h4>
                        <input type="text" placeholder="Planned frog..." class="frog-input">
                        <input type="number" placeholder="Target intensity" min="1" max="10" class="intensity-input">
                        <div class="day-status">
                            <span class="status-icon">‚è≥</span>
                            <span class="status-text">Not started</span>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="saveWeekPlan()">Save Week Plan</button>
            </div>
            
            <!-- Scoring Guide Page -->
            <div id="scoringPage" class="page">
                <h2>üìä Scoring Guide</h2>
                
                <div class="scoring-sections">
                    <div class="scoring-section">
                        <h3>üìà Intensity Scores</h3>
                        <div id="intensityGuide" class="scoring-table">
                            <!-- Intensity guide will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="scoring-section">
                        <h3>üí∞ ROI Scores</h3>
                        <div id="roiGuide" class="scoring-table">
                            <!-- ROI guide will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="scoring-section">
                        <h3>üî• Burn Scores</h3>
                        <div id="burnGuide" class="scoring-table">
                            <!-- Burn guide will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Page -->
            <div id="settingsPage" class="page">
                <h2>Settings</h2>
                
                <div class="settings-sections">
                    <div class="settings-section">
                        <h3>Focus Score Weights</h3>
                        <div class="setting-item">
                            <label for="weightIntensity">Intensity Weight</label>
                            <input type="number" id="weightIntensity" min="0" max="1" step="0.1" value="0.6">
                        </div>
                        <div class="setting-item">
                            <label for="weightROI">ROI Weight</label>
                            <input type="number" id="weightROI" min="0" max="1" step="0.1" value="0.3">
                        </div>
                        <div class="setting-item">
                            <label for="weightBurn">Burn Weight</label>
                            <input type="number" id="weightBurn" min="0" max="1" step="0.1" value="0.1">
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Preferences</h3>
                        <div class="setting-item">
                            <label for="theme">Theme</label>
                            <select id="theme">
                                <option value="light">Light</option>
                                <option value="dark">Dark</option>
                                <option value="auto">Auto</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="dailyTarget">Daily Intensity Target</label>
                            <input type="number" id="dailyTarget" min="1" max="10" value="8">
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
                    
                    <div class="settings-section danger-zone">
                        <h3>Subscription</h3>
                        <p>Active until: <span id="subscriptionEnd">-</span></p>
                        <button class="btn btn-secondary" onclick="manageSubscription()">Manage Subscription</button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- PR Celebration Modal -->
    <div id="prModal" class="modal celebration-modal">
        <div class="modal-content">
            <div class="celebration">
                <span class="celebration-icon">üèÜ</span>
                <h2>NEW PERSONAL RECORD!</h2>
                <p id="prMessage">You just crushed it!</p>
                <div class="confetti"></div>
            </div>
        </div>
    </div>
    
    <!-- Badge Modal -->
    <div id="badgeModal" class="modal celebration-modal">
        <div class="modal-content">
            <div class="celebration">
                <span class="celebration-icon" id="badgeIcon">üèÖ</span>
                <h2>BADGE EARNED!</h2>
                <p id="badgeMessage">Achievement unlocked!</p>
            </div>
        </div>
    </div>

    <!-- Onboarding Modal -->
    <div id="onboardingModal" class="modal">
        <div class="modal-content modal-large">
            <div class="onboarding-container">
                <h2>üöÄ Welcome to IntensifyHQ!</h2>
                <p style="text-align: center; margin-bottom: 2rem;">Work like you train - let's get you started!</p>
                
                <div class="onboarding-steps">
                    <div class="onboarding-step">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <h3>Log Your Tasks</h3>
                            <p>Rate every task on three metrics:</p>
                            <ul>
                                <li><strong>Intensity (1-10):</strong> How difficult is it?</li>
                                <li><strong>ROI (1-10):</strong> How valuable is it?</li>
                                <li><strong>Burn (1-10):</strong> How much energy does it take?</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="onboarding-step">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <h3>Eat Your Frog üê∏</h3>
                            <p>Mark your hardest, most important task as a "Frog" and complete it before noon. This builds discipline and momentum.</p>
                        </div>
                    </div>
                    
                    <div class="onboarding-step">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <h3>Hit Intensity 8+ Daily</h3>
                            <p>Aim for an average daily intensity of 8 or higher. This ensures you're consistently pushing your limits and growing.</p>
                        </div>
                    </div>
                    
                    <div class="onboarding-step">
                        <span class="step-number">4</span>
                        <div class="step-content">
                            <h3>Celebrate PRs üèÜ</h3>
                            <p>When you hit a new personal record (highest intensity with ROI ‚â•8), you'll see a celebration. These mark breakthrough moments!</p>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 2rem;">
                    <button onclick="closeOnboarding()" class="btn btn-primary btn-hero">Start Logging Tasks!</button>
                    <br>
                    <a href="/guide.html" style="margin-top: 1rem; display: inline-block;">Read Full Guide</a>
                </div>
            </div>
        </div>
    </div>

    <style>
        .onboarding-container {
            padding: 1rem;
        }
        .onboarding-steps {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }
        .onboarding-step {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }
        .step-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        .step-content h3 {
            margin-top: 0;
            color: #1f2937;
        }
        .step-content ul {
            margin-top: 0.5rem;
        }
    </style>

    <script>
        // Show onboarding for new users
        document.addEventListener('DOMContentLoaded', () => {
            if (!localStorage.getItem('onboardingComplete')) {
                setTimeout(() => {
                    document.getElementById('onboardingModal').classList.add('active');
                }, 500);
            }
        });

        function closeOnboarding() {
            localStorage.setItem('onboardingComplete', 'true');
            document.getElementById('onboardingModal').classList.remove('active');
        }
    </script>

    <script src="/app.js"></script>
</body>
</html>
